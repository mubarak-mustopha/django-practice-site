{% extends 'base.html' %}

{% block style %}
    <style>
        img {
            width: 100px;
            height: 100px;
        }

        .img-x img{
            width: 50px;
            height: 50px;
        }
        p {
            width: 500px;
        }
    </style>
{% endblock style %}

{% block content %}
    <div>
        <div>
            <img src="{{product.image_url}}" alt="">
        </div>
        <p>{{product.price}}</p>
        <button value="{{product.id}}"
                id="add-cart">
            Add to cart
        </button>
        <p>{{product.title}}</p>
        <p>{{product.description}}</p>
    </div>

    <div class="img-x">
        {% for prod in recently_viewed %}
            <img src="{{prod.image_url}}" alt="">
        {% endfor %}
    </div>

    <script>
        $(document).on("click", "#add-cart", function(e){
            e.preventDefault();
            $.ajax({
                type: 'POST',
                url: '{% url "cart_add" %}',
                data: {
                    product_id: $('#add-cart').val(),
                    csrfmiddlewaretoken: '{{csrf_token}}',
                    action: 'post'
                },

                success: function(json){
                    console.log(json);
                },

                error: function(xhr, errmsg, err){
                    
                }
            });


        })
    </script>

{% endblock content %}